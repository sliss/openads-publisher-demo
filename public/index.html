<!DOCTYPE html>
<html lang="en">

<head>
  <!-- favicons -->
  <link rel="apple-touch-icon" sizes="180x180" href="https://app.openads.ai/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://app.openads.ai/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://app.openads.ai/favicon-16x16.png">

  <title>OpenAds Contextual Advertising Demo</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@100;300&family=Oswald:wght@300&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="/tw.css">
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <style>
    #page-content h1 {
      font-size: 2em;
      font-weight: bold;
      margin: 0.67em 0;
    }

    #page-content h2 {
      font-size: 1.5em;
      font-weight: bold;
      margin: 0.83em 0;
    }

    #page-content h3 {
      font-size: 1.17em;
      font-weight: bold;
      margin: 1em 0;
    }

    #page-content strong {
      font-weight: bold;
    }

    #page-content ul {
      list-style: disc;
      padding-left: 2em;
      margin: 1em 0;
    }

    #page-content ol {
      list-style: decimal;
      padding-left: 2em;
      margin: 1em 0;
    }

    #page-content p {
      margin: 1em 0;
    }

    #page-content a {
      color: #d67238;
      text-decoration: underline;
    }

    #page-content blockquote {
      border-left: 4px solid #d67238;
      margin: 1em 0;
      padding-left: 1em;
      color: #666;
    }

    #page-content code {
      background-color: #f0f0f0;
      padding: 0.2em 0.4em;
      border-radius: 3px;
      font-family: monospace;
    }

    #page-content pre {
      background-color: #f0f0f0;
      padding: 1em;
      border-radius: 3px;
      overflow-x: auto;
      margin: 1em 0;
    }

    #page-content hr {
      border: 0;
      border-top: 1px solid #ddd;
      margin: 1em 0;
    }

    .markdown-content {
      line-height: 1.6;
      color: #4b5563;
    }

    .markdown-content>*:first-child {
      margin-top: 0;
    }

    .markdown-content>*:last-child {
      margin-bottom: 0;
    }

    .markdown-content h1 {
      font-size: 2em;
      font-weight: bold;
      margin: 1em 0 0.5em;
      color: #111827;
    }

    .markdown-content h2 {
      font-size: 1.5em;
      font-weight: bold;
      margin: 1em 0 0.5em;
      color: #111827;
    }

    .markdown-content h3 {
      font-size: 1.17em;
      font-weight: bold;
      margin: 1em 0 0.5em;
      color: #111827;
    }

    .markdown-content p {
      margin: 0.5em 0 1em;
    }

    .markdown-content ul,
    .markdown-content ol {
      margin: 0.5em 0 1em 2em;
    }

    .markdown-content ul {
      list-style-type: disc;
    }

    .markdown-content ol {
      list-style-type: decimal;
    }

    .markdown-content li {
      margin: 0.3em 0;
    }

    .markdown-content a {
      color: #d24e35;
      text-decoration: underline;
    }

    .markdown-content blockquote {
      border-left: 4px solid #d24e35;
      margin: 1em 0;
      padding-left: 1em;
      color: #6b7280;
    }

    .markdown-content code {
      background-color: #f3f4f6;
      padding: 0.2em 0.4em;
      border-radius: 3px;
      font-family: monospace;
      color: #111827;
    }

    .markdown-content pre {
      background-color: #f3f4f6;
      padding: 1em;
      border-radius: 3px;
      overflow-x: auto;
      margin: 1em 0;
      color: #111827;
    }

    .markdown-content hr {
      border: 0;
      border-top: 1px solid rgba(0, 0, 0, 0.1);
      margin: 1em 0;
    }

    .markdown-content img {
      max-width: 100%;
      height: auto;
    }

    /* Add fade effect styles */
    .fade {
      transition: opacity 0.5s ease-in-out;
    }

    .fade-out {
      opacity: 0;
    }

    .fade-in {
      opacity: 1;
    }

    /* Tooltip container */
    .tooltip {
      position: relative;
      display: inline-block;
      cursor: pointer;
    }

    /* Tooltip text */
    .tooltip .tooltiptext {
      visibility: hidden;
      width: 300px;
      background-color: white;
      color: #374151;
      text-align: center;
      border-radius: 6px;
      padding: 5px 0;
      position: absolute;
      z-index: 1;
      bottom: 125%;
      left: 50%;
      margin-left: -150px;
      opacity: 0;
      transition: opacity 0.3s;
      border: 1px solid rgba(0, 0, 0, 0.1);
    }

    /* Tooltip arrow */
    .tooltip .tooltiptext::after {
      content: "";
      position: absolute;
      top: 100%;
      left: 50%;
      margin-left: -5px;
      border-width: 5px;
      border-style: solid;
      border-color: white transparent transparent transparent;
    }

    /* Show the tooltip text when hovering */
    .tooltip:hover .tooltiptext {
      visibility: visible;
      opacity: 1;
    }
  </style>
</head>

<body>

  <div class="min-h-screen bg-gray-50 text-gray-900 font-custom">
    <div class="container mx-auto p-4 max-w-[1024px]">
      <div class="flex justify-center mb-12">
        <a href="https://openads.ai" target="_blank" rel="noopener noreferrer">
          <img src="https://openads-images.s3.us-east-1.amazonaws.com/open+logo+black+transp.png" alt="OpenAds AI"
            width="339" height="78" />
        </a>
      </div>
      <h1 class="text-4xl font-bold mb-4 text-center font-marcellus text-gray-900">Contextual Advertising Demo</h1>
      <p class="text-center text-gray-600 max-w-2xl mx-auto mb-8 text-lg">
        Enter any URL to analyze its content's tone, brand suitability, and contextual relevance.
      </p>

      <form id="brand-search-form" class="mb-8 max-w-2xl mx-auto">
        <div class="flex gap-2 relative">
          <input type="text" placeholder="Enter url (e.g., https://forbes.com/the-50-hottest-startups)"
            class="flex-grow bg-white shadow-sm text-gray-900 placeholder-gray-400 p-4 reticle border border-gray-200 focus:outline-none focus:border-[#d24e35]/50 focus:ring-1 focus:ring-[#d24e35]/50 transition-colors" />
        </div>
        <p id="url-error" class="text-red-600 mt-2 text-sm hidden">Please enter a valid URL (e.g., https://example.com)
        </p>
        <div class="mt-4">
          <button type="submit"
            class="w-full bg-brand-primary hover:bg-brand-secondary text-white rounded-none cut-corners p-4 font-semibold transition-colors disabled:bg-brand-primary/50 disabled:cursor-not-allowed">
            Generate Example
          </button>
        </div>

        <div id="general-error" class="hidden text-red-600 mt-4 rounded-lg mb-8">
        </div>
      </form>

      <div id="loading-spinner" class="hidden text-center mb-8">
        <img src="https://advertise.openads.ai/loading-spinner.gif" alt="Loading..." width="64" height="64"
          class="mx-auto mb-4 [filter:invert(1)]" />
        <p class="text-xl font-light text-gray-700">Scraping page...</p>
        <p id="loading-quote" class="mt-4 text-lg italic text-gray-600 max-w-2xl mx-auto fade"></p>
      </div>

      <div id="context-dashboard"
        class="hidden bg-white/95 backdrop-blur-sm cut-corners-lg shadow-xl mt-8 text-gray-600 p-8 max-w-[1024px] mx-auto mb-8">
        <div class="flex items-center justify-between mb-8">
          <h2 class="text-2xl font-bold font-marcellus text-gray-900">Page Context Analysis</h2>
          <div class="flex items-center gap-4">
            <span class="text-sm font-medium text-gray-500">Sentiment & Reading Level:</span>
            <div class="flex gap-3">
              <span id="sentiment" class="bg-[#d24e35]/10 text-[#d24e35] px-3 py-1.5 text-sm font-medium"></span>
              <span id="reading-level" class="bg-[#d24e35]/10 text-[#d24e35] px-3 py-1.5 text-sm font-medium"></span>
            </div>
          </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
          <!-- Left Column -->
          <div class="space-y-8">
            <!-- IAB Categories -->
            <div class="bg-white p-6 rounded-lg border border-gray-100 shadow-sm">
              <h3 class="text-lg font-semibold mb-4 font-marcellus text-gray-900">IAB Categories</h3>
              <div id="iab-categories" class="space-y-4">
                <div>
                  <p class="text-sm text-gray-500 mb-2">Primary</p>
                  <div id="primary-category" class="flex flex-wrap gap-2">
                    <!-- Will be populated by JS -->
                  </div>
                </div>
                <div>
                  <p class="text-sm text-gray-500 mb-2">Secondary</p>
                  <div id="secondary-categories" class="flex flex-wrap gap-2">
                    <!-- Will be populated by JS -->
                  </div>
                </div>
              </div>
            </div>

            <!-- Advertiser Categories -->
            <div class="bg-white p-6 rounded-lg border border-gray-100 shadow-sm">
              <h3 class="text-lg font-semibold mb-4 font-marcellus text-gray-900">Advertiser Categories</h3>
              <div id="advertiser-categories" class="space-y-4">
                <div>
                  <p class="text-sm text-gray-500 mb-2">Primary</p>
                  <div id="advertiser-categories-primary" class="flex flex-wrap gap-2">
                    <!-- Will be populated by JS -->
                  </div>
                </div>
                <div>
                  <p class="text-sm text-gray-500 mb-2">Secondary</p>
                  <div id="advertiser-categories-secondary" class="flex flex-wrap gap-2">
                    <!-- Will be populated by JS -->
                  </div>
                </div>
              </div>
            </div>

            <!-- Content Tone -->
            <div class="bg-white p-6 rounded-lg border border-gray-100 shadow-sm">
              <h3 class="text-lg font-semibold mb-4 font-marcellus text-gray-900">Content Tone</h3>
              <div id="content-tone" class="flex flex-wrap gap-2"></div>
            </div>

            <!-- Content Summary -->
            <div class="bg-white p-6 rounded-lg border border-gray-100 shadow-sm">
              <h3 class="text-lg font-semibold mb-4 font-marcellus text-gray-900">Content Summary</h3>
              <p id="content-summary" class="text-gray-600 leading-relaxed">This Politico article reports on President
                Trump's seemingly contradictory statements...</p>
            </div>
          </div>

          <!-- Middle Column -->
          <div class="space-y-8">
            <!-- Main Topics -->
            <div class="bg-white p-6 rounded-lg border border-gray-100 shadow-sm">
              <h3 class="text-lg font-semibold mb-4 font-marcellus text-gray-900">Main Topics</h3>
              <div id="main-topics" class="flex flex-wrap gap-2"></div>
            </div>

            <!-- Named Entities -->
            <div class="bg-white p-6 rounded-lg border border-gray-100 shadow-sm">
              <h3 class="text-lg font-semibold mb-4 font-marcellus text-gray-900">Key Entities</h3>
              <div id="named-entities" class="space-y-5">
                <div>
                  <p class="text-sm text-gray-500 mb-2">Top Brands</p>
                  <div id="brands" class="flex flex-wrap gap-2"></div>
                </div>
                <div>
                  <p class="text-sm text-gray-500 mb-2">Organizations</p>
                  <div id="organizations" class="flex flex-wrap gap-2"></div>
                </div>
                <div>
                  <p class="text-sm text-gray-500 mb-2">Locations</p>
                  <div id="locations" class="flex flex-wrap gap-2"></div>
                </div>
              </div>
            </div>
          </div>

          <!-- Right Column -->
          <div class="space-y-8">
            <!-- Domain & UGC Risks -->
            <div class="bg-white p-6 rounded-lg border border-gray-100 shadow-sm">
              <h3 class="text-lg font-semibold mb-4 font-marcellus text-gray-900">Domain & Content Risks</h3>
              <div class="grid grid-cols-1 gap-3">
                <!-- Domain Reputation Risk -->
                <div class="tooltip">
                  <div class="p-3 rounded-lg" id="domain-reputation-risk">
                    <div class="flex justify-between items-center">
                      <p class="font-medium text-sm">Domain Reputation</p>
                      <span
                        class="text-xs font-medium px-2.5 py-1 rounded-full bg-gray-100 text-gray-700 uppercase risk-level"></span>
                    </div>
                  </div>
                </div>

                <!-- MFA Risk -->
                <div class="tooltip">
                  <div class="p-3 rounded-lg" id="mfa-risk">
                    <div class="flex justify-between items-center">
                      <p class="font-medium text-sm">Made For Advertising</p>
                      <span
                        class="text-xs font-medium px-2.5 py-1 rounded-full bg-gray-100 text-gray-700 uppercase risk-level"></span>
                    </div>
                  </div>
                </div>

                <!-- UGC Risk -->
                <div class="tooltip">
                  <div class="p-3 rounded-lg" id="ugc-risk">
                    <div class="flex justify-between items-center">
                      <p class="font-medium text-sm">User Generated Content</p>
                      <span
                        class="text-xs font-medium px-2.5 py-1 rounded-full bg-gray-100 text-gray-700 uppercase risk-level"></span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- GARM Risk Analysis -->
            <div class="bg-white p-6 rounded-lg border border-gray-100 shadow-sm">
              <h3 class="text-lg font-semibold mb-4 font-marcellus text-gray-900">GARM Risk Analysis</h3>
              <div id="garm-risks" class="grid grid-cols-1 gap-3"></div>
            </div>
          </div>
        </div>
      </div>

      <div id="page-content"
        class="hidden bg-white/95 backdrop-blur-sm rounded-lg shadow-xl mt-8 text-gray-600 p-8 max-w-[1024px] mx-auto">
        <h1 class="text-3xl font-bold mb-8 text-center text-gray-900">OpenAds Contextual Ad</h1>
        <div class="markdown-content">
          <!-- Content will be inserted here by JavaScript -->
        </div>
      </div>
    </div>
  </div>

  <script>
    // Add marked configuration at the start
    marked.setOptions({
      breaks: true,
      gfm: true,
      headerIds: false,
      mangle: false,
      sanitize: false
    });

    const quotes = [
      "The best ideas come as jokes. Make your thinking as funny as possible. — David Ogilvy",
      "If it doesn't sell, it isn't creative. — David Ogilvy",
      "A good advertisement sells the product without drawing attention to itself. — David Ogilvy",
      "Stopping advertising to save money is like stopping your watch to save time. — Henry Ford",
      "The most powerful element in advertising is the truth. — Bill Bernbach",
      "Nobody reads ads. People read what interests them. Sometimes, it's an ad. — Howard Gossage",
      "In good times people want to advertise; in bad times they have to. — Bruce Barton",
      "On average, five times as many people read the headline as the body copy. — David Ogilvy",
      "Advertising is the 'wonder' in Wonder Bread. — Jef I. Richards",
      "Never stop testing, and your advertising will never stop improving. — David Ogilvy",
      "When you advertise fire extinguishers, open with the fire. — David Ogilvy",
      "An ad is finished only when you can't find a single element to remove. — Robert Fleege",
      "Advertising is the modern substitute for argument. — George Santayana",
      "Where people aren't having any fun, they seldom produce good work. — David Ogilvy",
      "The more informative your advertising, the more persuasive it will be. — David Ogilvy",
      "Creativity is the secret to making the mundane memorable. — Leo Burnett"
    ];

    const baseUrl = window.location.hostname === 'localhost' ? 'http://localhost:3000' : 'https://api.openads.ai';
    window.stratosSettings = {
      publisherId: '6660be5c4e70d17b07751c91', // prod
      disableInitialLoad: true,
      adSlots: [
        {
          adUnitCode: 'inline-ad',
          adFormat: 'chat',
          size: [970, 270],
        }
      ],
      cssOverrides: ` :root {
        --background: #fff5f0;
        --text: #4a3428;
        --header: #000000;
        --header-background: #fff5f0;
        --title: #000000;
        --question-bubble: #FFFFFF;
        --highlight: #b85f2d;
        --action-button: #d67238;
      }
      #visit-site-link {
        background-color: #d67238;
        color: white;
      }
      #visit-site-link:hover {
        background-color: #b85f2d;
      }
      .chat-message-bubble {
        border: 1px solid rgba(214, 114, 56, 0.2);
      }`
    };
    window.stratos = window.stratos || { queue: [] };
    window.stratos.queue.push(function() {
      console.log('Stratos initialized!')
    });

    const quoteElement = document.getElementById('loading-quote');
    let currentQuoteIndex = Math.floor(Math.random() * quotes.length);
    quoteElement.textContent = quotes[currentQuoteIndex];

    const form = document.getElementById('brand-search-form');
    form.addEventListener('submit', async function(e) {
      e.preventDefault();
      const input = this.querySelector('input');
      const errorElement = document.getElementById('url-error');
      const generalError = document.getElementById('general-error');
      let url = input.value.trim();

      generalError.classList.add('hidden');

      // URL validation
      try {
        // Add https if no protocol specified
        if (!/^https?:\/\//i.test(url)) {
          url = 'https://' + url;
        }

        // Check if it's a valid URL
        const urlObj = new URL(url);

        // Check for valid domain format (at least one dot and valid TLD)
        const domainRegex = /^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i;
        if (!domainRegex.test(urlObj.hostname)) {
          throw new Error('Invalid domain format');
        }

        errorElement.classList.add('hidden');
      } catch (err) {
        errorElement.classList.remove('hidden');
        return;
      }

      // Extract domain from valid URL
      const domain = new URL(url).hostname;

      const button = form.querySelector('button');
      button.disabled = true;
      button.textContent = 'Loading...';

      document.getElementById('page-content').classList.add('hidden');
      const spinner = document.getElementById('loading-spinner');
      spinner.classList.remove('hidden');

      try {
        let response = await fetch(`${baseUrl}/srv/publisher-scraper?domain=${domain}&url=${url}`);
        if (!response.ok) {
          throw new Error('Invalid API response');
        }
        const responseBody = await response.json();
        const scrapedPage = responseBody.pageDoc;
        const contextualSignals = responseBody.contextualSignals;

        // Populate the context dashboard
        populateContextDashboard(contextualSignals);

        const lines = scrapedPage.extractedMarkdown.trim().split('\n');

        const totalLines = lines.length;
        let adPoint = Math.floor(lines.length / 3);
        for (; adPoint < 2 * lines.length / 3; ++adPoint) {
          if (!lines[adPoint].trim()) {
            break;
          }
        }
        if (adPoint >= 2 * lines.length / 3) {
          adPoint = 1;
        }

        document.getElementById('page-content').innerHTML = [
          `<h1 class="text-3xl font-bold mb-8 text-center">Contextual Ad</h1>`,
          `<div class="markdown-content">
            ${marked.parse(lines.slice(0, adPoint).join('\n'))}
          </div>`,
          '<div class="flex justify-center"><div id="inline-ad" class="w-[970px] h-[300px] shadow-md mt-4 mb-4"></div></div>',
          `<div class="markdown-content">
            ${marked.parse(lines.slice(adPoint).join('\n'))}
          </div>`
        ].join('\n\n');

        spinner.classList.add('hidden');
        document.getElementById('page-content').classList.remove('hidden');

        const promptText = 'I am looking to buy goods and services related to the following content:\n\n' + lines.join('\n\n');
        window.stratos.queue.push(function() {
          window.stratos.getAds(promptText);
        });

      } catch (error) {
        spinner.classList.add('hidden');
        document.getElementById('page-content').classList.add('hidden');

        const generalError = document.getElementById('general-error');
        generalError.textContent = 'Error: ' + (error.response?.data?.message ?? 'An error occurred while processing your request. Please try again.');
        generalError.classList.remove('hidden');
        console.error(error);
      } finally {
        button.disabled = false;
        button.textContent = 'Generate Example';
      }
    });

    function populateContextDashboard(contextualSignals) {
      const dashboard = document.getElementById('context-dashboard');
      dashboard.classList.remove('hidden');

      // Content Quality Indicators
      const sentiment = contextualSignals.semantic_analysis.sentiment.overall;
      const readingLevel = contextualSignals.semantic_analysis.content_quality.reading_level;
      document.getElementById('sentiment').textContent = sentiment.charAt(0).toUpperCase() + sentiment.slice(1);
      document.getElementById('reading-level').textContent = readingLevel.charAt(0).toUpperCase() + readingLevel.slice(1);

      // IAB Categories
      document.getElementById('primary-category').innerHTML = createTag(contextualSignals.iab_content_category.primary);
      document.getElementById('secondary-categories').innerHTML =
        contextualSignals.iab_content_category.secondary
          .map(category => createTag(category))
          .join('');

      // Advertiser Categories
      document.getElementById('advertiser-categories-primary').innerHTML =
        (Array.isArray(contextualSignals.advertiser_categories.primary)
          ? contextualSignals.advertiser_categories.primary
          : contextualSignals.advertiser_categories.primary.split(' • '))
          .map(category => createTag(category))
          .join('');

      document.getElementById('advertiser-categories-secondary').innerHTML =
        (Array.isArray(contextualSignals.advertiser_categories.secondary)
          ? contextualSignals.advertiser_categories.secondary
          : contextualSignals.advertiser_categories.secondary.split(' • '))
          .map(category => createTag(category))
          .join('');

      // Content Tone
      const contentToneContainer = document.getElementById('content-tone');
      contentToneContainer.innerHTML = contextualSignals.semantic_analysis.content_tone
        .map(tone => createTag(tone.charAt(0).toUpperCase() + tone.slice(1)))
        .join('');

      // Content Summary
      document.getElementById('content-summary').textContent = contextualSignals.summary;

      // Main Topics
      const topicsContainer = document.getElementById('main-topics');
      topicsContainer.innerHTML = contextualSignals.semantic_analysis.main_topics
        .map(topic => createTag(topic))
        .join('');

      // Named Entities
      const createEntityTags = (entities) => entities
        .map(entity => createTag(entity))
        .join('');

      document.getElementById('brands').innerHTML = createEntityTags(contextualSignals.semantic_analysis.named_entities.brands || []);
      document.getElementById('organizations').innerHTML = createEntityTags(contextualSignals.semantic_analysis.named_entities.organizations || []);
      document.getElementById('locations').innerHTML = createEntityTags(contextualSignals.semantic_analysis.named_entities.locations || []);

      // GARM Risks
      const garmContainer = document.getElementById('garm-risks');
      garmContainer.innerHTML = Object.entries(contextualSignals.garm_risks)
        .map(([key, value]) => {
          const riskColors = {
            'none': 'bg-green-50 text-green-700',
            'low': 'bg-yellow-50 text-yellow-700',
            'medium': 'bg-orange-50 text-orange-700',
            'high': 'bg-red-50 text-red-700'
          };
          const colorClass = riskColors[value.risk_level] || riskColors.none;

          return `
            <div class="tooltip">
              <div class="p-3 ${colorClass} cut-corners-sm rounded-none">
                <div class="flex justify-between items-center">
                  <p class="font-medium text-sm">${key.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase())}</p>
                  <span class="text-xs font-medium px-2.5 py-1 rounded-full bg-gray-100 text-gray-700 uppercase">
                    ${value.risk_level}
                  </span>
                </div>
              </div>
              ${value.risk_level !== 'none' ? `<span class="tooltiptext">${value.evidence}</span>` : ''}
            </div>
          `;
        })
        .join('');

      // Domain Reputation Risk
      const domainRiskElement = document.getElementById('domain-reputation-risk');
      const domainRisk = contextualSignals.domain_reputation_risks;
      const domainRiskColors = {
        'none': 'bg-green-50 text-green-700',
        'low': 'bg-yellow-50 text-yellow-700',
        'medium': 'bg-orange-50 text-orange-700',
        'high': 'bg-red-50 text-red-700'
      };
      domainRiskElement.className = `p-3 ${domainRiskColors[domainRisk.risk_level]} rounded-lg`;
      domainRiskElement.querySelector('.risk-level').textContent = domainRisk.risk_level;
      if (domainRisk.risk_level !== 'none') {
        domainRiskElement.parentElement.className = 'tooltip';
        domainRiskElement.parentElement.innerHTML += `<span class="tooltiptext">${domainRisk.evidence}</span>`;
      }

      // MFA Risk
      const mfaRiskElement = document.getElementById('mfa-risk');
      const mfaRisk = contextualSignals.mfa_level;
      const mfaRiskColors = {
        'none': 'bg-green-50 text-green-700',
        'low': 'bg-yellow-50 text-yellow-700',
        'medium': 'bg-orange-50 text-orange-700',
        'high': 'bg-red-50 text-red-700'
      };
      mfaRiskElement.className = `p-3 ${mfaRiskColors[mfaRisk]} rounded-lg`;
      mfaRiskElement.querySelector('.risk-level').textContent = mfaRisk;
      if (mfaRisk !== 'none') {
        const evidence = "This site shows characteristics of being Made For Advertising (MFA), which typically includes clickbait, sensational headlines, and low-quality or AI-generated content designed primarily to generate ad revenue.";
        mfaRiskElement.parentElement.className = 'tooltip';
        mfaRiskElement.parentElement.innerHTML += `<span class="tooltiptext">${evidence}</span>`;
      }

      // UGC Risk
      const ugcRiskElement = document.getElementById('ugc-risk');
      const ugcRisk = contextualSignals.ugc_risks;
      const ugcRiskColors = {
        'none': 'bg-green-50 text-green-700',
        'low': 'bg-yellow-50 text-yellow-700',
        'medium': 'bg-orange-50 text-orange-700',
        'high': 'bg-red-50 text-red-700'
      };
      ugcRiskElement.className = `p-3 ${ugcRiskColors[ugcRisk.risk_level]} rounded-lg`;
      ugcRiskElement.querySelector('.risk-level').textContent = ugcRisk.risk_level;
      if (ugcRisk.risk_level !== 'none') {
        ugcRiskElement.parentElement.className = 'tooltip';
        ugcRiskElement.parentElement.innerHTML += `<span class="tooltiptext">${ugcRisk.evidence}</span>`;
      }
    }

    // Function to cycle quotes
    function cycleQuotes() {
      quoteElement.classList.remove('fade-in');
      quoteElement.classList.add('fade-out');
      setTimeout(() => {
        currentQuoteIndex = (currentQuoteIndex + 1) % quotes.length;
        quoteElement.textContent = quotes[currentQuoteIndex];
        quoteElement.classList.remove('fade-out');
        quoteElement.classList.add('fade-in');
      }, 500); // Wait for fade-out to complete
    }

    // Cycle quotes every 5 seconds
    setInterval(cycleQuotes, 15000);

    // Update tag generation to remove reticle
    const createTag = (text) => `
      <span class="bg-[#d24e35]/10 text-[#d24e35] px-3 py-1.5 text-sm font-medium">
        ${text}
      </span>
    `;

    // Update entity tags
    const createEntityTags = (entities) => entities
      .map(entity => createTag(entity))
      .join('');

    // Update content tone container
    const contentToneContainer = document.getElementById('content-tone');
    contentToneContainer.innerHTML = contextualSignals.semantic_analysis.content_tone
      .map(tone => createTag(tone.charAt(0).toUpperCase() + tone.slice(1)))
      .join('');

    // Update topics container
    const topicsContainer = document.getElementById('main-topics');
    topicsContainer.innerHTML = contextualSignals.semantic_analysis.main_topics
      .map(topic => createTag(topic))
      .join('');

    // Update sentiment and reading level
    document.getElementById('sentiment').className = 'bg-[#d24e35]/10 text-[#d24e35] px-3 py-1.5 text-sm font-medium';
    document.getElementById('reading-level').className = 'bg-[#d24e35]/10 text-[#d24e35] px-3 py-1.5 text-sm font-medium';

    // Update IAB Categories to use tags
    document.getElementById('primary-category').innerHTML = createTag(contextualSignals.iab_content_category.primary);
    document.getElementById('secondary-categories').innerHTML =
      contextualSignals.iab_content_category.secondary
        .map(category => createTag(category))
        .join('');
  </script>
  <script async src="https://js.stratos.blue/stratos.js?publisherId=6723c110a57d08398172c304"></script>
</body>

</html>